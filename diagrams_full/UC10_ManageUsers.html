<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose'
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 40px;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .mermaid {
            background: white;
        }
    </style>
</head>
<body>
    <div class="mermaid">
sequenceDiagram
    actor Admin as ‚öôÔ∏è Admin
    participant UI as üñ•Ô∏è Dashboard
    participant Server as ‚öôÔ∏è Server
    participant DB as üíæ Database

    Note over Admin,DB: UC10: Qu·∫£n l√Ω ng∆∞·ªùi d√πng

    %% Xem danh s√°ch
    Admin->>UI: 1. Truy c·∫≠p "Qu·∫£n l√Ω ng∆∞·ªùi d√πng"
    UI->>Server: 2. GET /api/admin/users
    Server->>DB: 3. SELECT * FROM Users
    DB-->>Server: 4. Tr·∫£ v·ªÅ danh s√°ch
    Server-->>UI: 5. Tr·∫£ v·ªÅ data
    UI-->>Admin: 6. Hi·ªÉn th·ªã b·∫£ng users

    %% T√¨m ki·∫øm
    Admin->>UI: 7. T√¨m ki·∫øm/l·ªçc
    UI->>Server: 8. GET v·ªõi query
    Server->>DB: 9. SELECT v·ªõi WHERE
    DB-->>Server: 10. K·∫øt qu·∫£
    Server-->>UI: 11. Data
    UI-->>Admin: 12. Hi·ªÉn th·ªã

    %% X√≥a user
    rect rgb(255, 240, 240)
        Note over Admin,DB: X√≥a t√†i kho·∫£n vi ph·∫°m
        Admin->>UI: 13. Ch·ªçn user, nh·∫•n "X√≥a"
        UI-->>Admin: 14. "Nh·∫≠p email ƒë·ªÉ x√°c nh·∫≠n"
        Admin->>UI: 15. Nh·∫≠p email
        UI->>Server: 16. DELETE /api/admin/users/{id}<br/>{email: "..."}
        Server->>Server: 17. Validate email
        
        alt E1: Email sai
            Server-->>UI: 18a. Error
            UI-->>Admin: 19a. ‚ùå "Email kh√¥ng ƒë√∫ng"
        else Email ƒë√∫ng
            Server->>DB: 18b. UPDATE Users<br/>SET status='deleted'
            DB-->>Server: 19b. Deleted
            Server-->>UI: 20b. Success
            UI-->>Admin: 21b. ‚úÖ "ƒê√£ x√≥a user"
        end
    end

    </div>
</body>
</html>