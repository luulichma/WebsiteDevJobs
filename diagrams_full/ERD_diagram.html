<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose'
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 40px;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .mermaid {
            background: white;
        }
    </style>
</head>
<body>
    <div class="mermaid">
graph TD
    %% ==================== USERS ENTITY ====================
    USERS[USERS]
    U_ID([user_id]):::key
    U_EMAIL([email])
    U_PASS([password_hash])
    U_NAME([full_name])
    U_PHONE([phone])
    U_ROLE([role])
    U_STATUS([status])
    U_CV([cv_url])
    U_SKILLS([skills])
    
    U_ID -.-> USERS
    U_EMAIL -.-> USERS
    U_PASS -.-> USERS
    U_NAME -.-> USERS
    U_PHONE -.-> USERS
    U_ROLE -.-> USERS
    U_STATUS -.-> USERS
    U_CV -.-> USERS
    U_SKILLS -.-> USERS
    
    %% ==================== COMPANIES ENTITY ====================
    COMPANIES[COMPANIES]
    C_ID([company_id]):::key
    C_NAME([company_name])
    C_DESC([description])
    C_WEB([website])
    C_LOGO([logo_url])
    C_ADDR([address])
    C_STATUS([status])
    
    C_ID -.-> COMPANIES
    C_NAME -.-> COMPANIES
    C_DESC -.-> COMPANIES
    C_WEB -.-> COMPANIES
    C_LOGO -.-> COMPANIES
    C_ADDR -.-> COMPANIES
    C_STATUS -.-> COMPANIES
    
    %% ==================== JOBS ENTITY ====================
    JOBS[JOBS]
    J_ID([job_id]):::key
    J_TITLE([title])
    J_DESC([description])
    J_REQ([requirements])
    J_SAL_MIN([salary_min])
    J_SAL_MAX([salary_max])
    J_LOC([location])
    J_TYPE([job_type])
    J_STATUS([status])
    J_EXP([expiry_date])
    
    J_ID -.-> JOBS
    J_TITLE -.-> JOBS
    J_DESC -.-> JOBS
    J_REQ -.-> JOBS
    J_SAL_MIN -.-> JOBS
    J_SAL_MAX -.-> JOBS
    J_LOC -.-> JOBS
    J_TYPE -.-> JOBS
    J_STATUS -.-> JOBS
    J_EXP -.-> JOBS
    
    %% ==================== APPLICATIONS ENTITY ====================
    APPLICATIONS[APPLICATIONS]
    A_ID([application_id]):::key
    A_CV([cv_url])
    A_COVER([cover_letter])
    A_STATUS([status])
    A_DATE([applied_at])
    
    A_ID -.-> APPLICATIONS
    A_CV -.-> APPLICATIONS
    A_COVER -.-> APPLICATIONS
    A_STATUS -.-> APPLICATIONS
    A_DATE -.-> APPLICATIONS
    
    %% ==================== SKILLS ENTITY ====================
    SKILLS[SKILLS]
    S_ID([skill_id]):::key
    S_NAME([skill_name])
    S_CAT([category])
    
    S_ID -.-> SKILLS
    S_NAME -.-> SKILLS
    S_CAT -.-> SKILLS
    
    %% ==================== RELATIONSHIPS ====================
    R_CREATES{{creates}}:::relationship
    R_POSTS{{posts}}:::relationship
    R_MANAGES{{manages}}:::relationship
    R_RECEIVES{{receives}}:::relationship
    R_SUBMITS{{submits}}:::relationship
    R_REQUIRES{{requires}}:::relationship
    R_APPROVES{{approves}}:::relationship
    
    %% Users (Recruiter) creates Companies
    USERS -->|1| R_CREATES
    R_CREATES -->|N| COMPANIES
    
    %% Companies posts Jobs
    COMPANIES -->|1| R_POSTS
    R_POSTS -->|N| JOBS
    
    %% Users (Recruiter) manages Jobs
    USERS -->|1| R_MANAGES
    R_MANAGES -->|N| JOBS
    
    %% Jobs receives Applications
    JOBS -->|1| R_RECEIVES
    R_RECEIVES -->|N| APPLICATIONS
    
    %% Users (Candidate) submits Applications
    USERS -->|1| R_SUBMITS
    R_SUBMITS -->|N| APPLICATIONS
    
    %% Jobs requires Skills (M:N)
    JOBS -->|M| R_REQUIRES
    R_REQUIRES -->|N| SKILLS
    
    %% Users (Admin) approves Jobs
    USERS -->|1| R_APPROVES
    R_APPROVES -->|N| JOBS
    
    %% ==================== STYLING ====================
    classDef default fill:#fff,stroke:#333,stroke-width:2px
    classDef key fill:#ffe6e6,stroke:#ff0000,stroke-width:3px
    classDef relationship fill:#ffffcc,stroke:#ff9900,stroke-width:2px
    
    style USERS fill:#e3f2fd,stroke:#1976d2,stroke-width:3px
    style COMPANIES fill:#e8f5e9,stroke:#388e3c,stroke-width:3px
    style JOBS fill:#fff3e0,stroke:#f57c00,stroke-width:3px
    style APPLICATIONS fill:#fce4ec,stroke:#c2185b,stroke-width:3px
    style SKILLS fill:#f3e5f5,stroke:#7b1fa2,stroke-width:3px

    </div>
</body>
</html>