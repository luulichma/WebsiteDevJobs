<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose'
        });
    </script>
    <style>
        body {
            margin: 0;
            padding: 40px;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .mermaid {
            background: white;
        }
    </style>
</head>
<body>
    <div class="mermaid">
sequenceDiagram
    actor Recruiter as üëî Nh√† tuy·ªÉn d·ª•ng<br/>(Recruiter)
    participant UI as üñ•Ô∏è Giao di·ªán<br/>(UI)
    participant Server as ‚öôÔ∏è Server<br/>(Backend)
    participant DB as üíæ Database

    Note over Recruiter,DB: UC08.2: Gia h·∫°n tin tuy·ªÉn d·ª•ng

    Recruiter->>UI: 1. Nh·∫•n "Renew" tr√™n tin h·∫øt h·∫°n
    UI->>Server: 2. POST /api/jobs/:id/renew
    
    Server->>Server: 3. Ki·ªÉm tra credits/subscription
    
    alt ƒê·ªß credits
        Server->>DB: 4. UPDATE Jobs<br/>SET expiry_date = DATE_ADD(NOW(), 30),<br/>status = 'Active'
        DB-->>Server: 5. X√°c nh·∫≠n
        Server->>DB: 6. Tr·ª´ credits (UPDATE Credits)
        DB-->>Server: 7. Credits updated
        Server-->>UI: 8. Success
        UI-->>Recruiter: 9. ‚úÖ "Gia h·∫°n th√†nh c√¥ng ƒë·∫øn [date]"
    else H·∫øt credits
        Server-->>UI: ‚ùå Kh√¥ng ƒë·ªß credits
        UI-->>Recruiter: "Vui l√≤ng n√¢ng c·∫•p g√≥i"<br/>+ Button "N√¢ng c·∫•p ngay"
    end

    </div>
</body>
</html>