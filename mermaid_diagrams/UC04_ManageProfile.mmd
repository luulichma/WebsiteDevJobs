sequenceDiagram
    actor Candidate as ğŸ‘¤ á»¨ng viÃªn<br/>(Candidate)
    participant UI as ğŸ–¥ï¸ Giao diá»‡n<br/>(UI)
    participant Server as âš™ï¸ Server<br/>(Backend)
    participant DB as ğŸ’¾ Database
    participant Storage as â˜ï¸ Cloud Storage<br/>(S3/Cloudinary)

    Note over Candidate,Storage: UC04: Quáº£n lÃ½ há»“ sÆ¡ cÃ¡ nhÃ¢n

    %% Luá»“ng chÃ­nh
    Candidate->>UI: 1. Truy cáº­p trang "Há»“ sÆ¡ cá»§a tÃ´i"
    UI->>Server: 2. GET /api/candidate/profile
    Server->>DB: 3. SELECT * FROM Candidates WHERE id = ?
    DB-->>Server: 4. Tráº£ vá» thÃ´ng tin hiá»‡n táº¡i
    Server-->>UI: 5. Tráº£ vá» dá»¯ liá»‡u profile
    UI-->>Candidate: 6. Hiá»ƒn thá»‹ form chá»‰nh sá»­a<br/>(Há» tÃªn, Email, SÄT, Skills, CV)

    Candidate->>UI: 7. Chá»‰nh sá»­a thÃ´ng tin vÃ  upload CV má»›i
    Candidate->>UI: 8. Nháº¥n "LÆ°u thay Ä‘á»•i"
    
    UI->>Server: 9. PUT /api/candidate/profile<br/>(FormData + File CV)
    
    alt File CV Ä‘Æ°á»£c upload
        Server->>Server: 10. Kiá»ƒm tra file<br/>(PDF/DOCX, <5MB)
        
        alt File há»£p lá»‡
            Server->>Storage: 11. Upload CV lÃªn Cloud
            Storage-->>Server: 12. Tráº£ vá» URL cá»§a CV
            Server->>DB: 13. UPDATE Candidates<br/>SET name=?, phone=?, cv_url=?, skills=?<br/>WHERE id=?
            DB-->>Server: 14. XÃ¡c nháº­n cáº­p nháº­t
            Server-->>UI: 15. Tráº£ vá» success
            UI-->>Candidate: 16. âœ… "Cáº­p nháº­t thÃ nh cÃ´ng"
        else File khÃ´ng há»£p lá»‡ (E1)
            Server-->>UI: âŒ Lá»—i: File khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng<br/>hoáº·c dung lÆ°á»£ng > 5MB
            UI-->>Candidate: Hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
        end
    else Chá»‰ cáº­p nháº­t thÃ´ng tin (khÃ´ng upload CV)
        Server->>DB: 11. UPDATE Candidates<br/>SET name=?, phone=?, skills=?<br/>WHERE id=?
        DB-->>Server: 12. XÃ¡c nháº­n cáº­p nháº­t
        Server-->>UI: 13. Tráº£ vá» success
        UI-->>Candidate: 14. âœ… "Cáº­p nháº­t thÃ nh cÃ´ng"
    end

    Note over Candidate,Storage: Káº¿t thÃºc use case
