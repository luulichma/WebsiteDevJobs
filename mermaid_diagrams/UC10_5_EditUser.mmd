sequenceDiagram
    actor Admin as âš™ï¸ Quáº£n trá»‹ viÃªn<br/>(Admin)
    participant UI as ğŸ–¥ï¸ Giao diá»‡n<br/>(Admin Dashboard)
    participant Server as âš™ï¸ Server<br/>(Backend)
    participant DB as ğŸ’¾ Database
    participant Email as ğŸ“§ Email Service

    Note over Admin,Email: UC10.5: Chá»‰nh sá»­a thÃ´ng tin user

    Admin->>UI: 1. Click "Sá»­a" trÃªn user
    UI-->>Admin: 2. Hiá»ƒn thá»‹ form chá»‰nh sá»­a<br/>(Name, Phone, Role, Status)
    Admin->>UI: 3. Chá»‰nh sá»­a thÃ´ng tin
    Admin->>UI: 4. Nháº¥n "LÆ°u"
    
    UI->>Server: 5. PUT /api/admin/users/{id}<br/>(updated data)
    Server->>DB: 6. Kiá»ƒm tra email unique<br/>SELECT COUNT(*) FROM Users<br/>WHERE email = ? AND user_id != ?
    
    alt Email Ä‘Ã£ tá»“n táº¡i
        DB-->>Server: 7a. Count > 0
        Server-->>UI: 8a. Error "Email duplicate"
        UI-->>Admin: 9a. âŒ Hiá»ƒn thá»‹ lá»—i<br/>"Email nÃ y Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng"
    else Email há»£p lá»‡ (hoáº·c khÃ´ng Ä‘á»•i)
        DB-->>Server: 7b. Count = 0 (OK)
        Server->>DB: 8b. UPDATE Users<br/>SET full_name=?, phone=?,<br/>role=?, status=?, updated_at=NOW()<br/>WHERE user_id = ?
        DB-->>Server: 9b. Updated
        
        Server->>DB: 10b. INSERT INTO AdminLogs<br/>(admin_id, action, target_user, changes)
        DB-->>Server: 11b. Log saved
        
        Server->>Email: 12b. Gá»­i email thÃ´ng bÃ¡o<br/>"ThÃ´ng tin tÃ i khoáº£n Ä‘Ã£ Ä‘Æ°á»£c cáº­p nháº­t"
        Email-->>Server: 13b. Email sent
        
        Server-->>UI: 14b. Success
        UI-->>Admin: 15b. âœ… "Cáº­p nháº­t thÃ nh cÃ´ng"
    end
